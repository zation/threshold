"use strict";angular.module("logicMonitorApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngCollection"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/threshold.html",controller:"ThresholdCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("logicMonitorApp").controller("ThresholdCtrl",["$scope","Thresholds",function(a,b){a.thresholds=b.getInstance(),a.thresholds.add({from:"",until:"",operator:">",numberForWarning:"",numberForError:22,numberForCritical:0}),a.thresholds.add({from:"00:30",until:"01:30",operator:"=",numberForWarning:11,numberForError:"",numberForCritical:0}),a.thresholds.add({from:"03:30",until:"04:30",operator:"<",numberForWarning:11,numberForError:12312,numberForCritical:0}),a.$on("activate",function(b,c){a.$broadcast("deactivate",c)}),a.onAdd=function(b){a.thresholds.add(b)},a.onRemove=function(b){a.thresholds.remove(b)},a.fromOrder=function(a){var b=Number(a.from.replace(":","."));return isNaN(b)?0:b}}]),angular.module("logicMonitorApp").factory("Thresholds",["$collection",function(a){var b=a;b.TIMES=[];for(var c=0;24>c;c++)for(var d=0;60>d;d+=15){var e=10>c?"0"+c:c,f=10>d?"0"+d:d;b.TIMES.push(e+":"+f)}return b.COMPARISONS=[{name:"is equal to (=)",operator:"="},{name:"is greater than (>)",operator:">"},{name:"is less than (<)",operator:"<"}],b}]),angular.module("logicMonitorApp").directive("lmThresholdEditor",["$document",function(a){return{restrict:"EA",templateUrl:"views/thresholdEditor.html",replace:!0,scope:{onSave:"=",onRemove:"=",threshold:"="},link:function(b,c){angular.element(c).on("click",function(a){a.stopPropagation();var b=["INPUT","LABEL","SELECT"];b.indexOf(a.target.nodeName)<0&&angular.element(c).find(".from").focus()}),a.on("click",function(a){b.active&&b.$apply(function(){b.cancel(a)})}),a.on("keyup",function(a){27===a.keyCode&&(angular.element(c).find("input, select").blur(),b.$apply(function(){b.cancel(a)}))})},controller:["$scope","Thresholds",function(a,b){function c(){a.newThreshold={id:"new",from:"",until:a.times[0],operator:a.comparisons[0].operator}}a.times=b.TIMES,a.comparisons=b.COMPARISONS,a.isAdding=void 0===a.threshold,a.isEditing=!a.isAdding,a.isAdding?c():a.newThreshold=angular.copy(a.threshold),a.active=!1,a.activate=function(){a.active=!0,a.$emit("activate",a.newThreshold.id)},a.$on("deactivate",function(b,c){c!==a.newThreshold.id&&(a.active=!1)}),a.remove=function(b){b.stopPropagation(),a.onRemove&&a.onRemove(a.threshold)},a.cancel=function(b){b.stopPropagation(),a.active=!1,a.isAdding?c():a.newThreshold=angular.copy(a.threshold)},a.submit=function(b){b.stopPropagation(),a.active=!1,a.isAdding?(delete a.newThreshold.id,a.onSave(a.newThreshold),c()):a.isEditing&&(a.threshold=angular.copy(a.newThreshold))}}]}}]);